<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hajime: MiyaGi & Andy Panda — True Underground</title>
    <!-- Подключение Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Special+Elite&display=swap" rel="stylesheet">
    
    <style>
        /* === ГЛОБАЛЬНЫЕ СТИЛИ === */
        body {
            background-color: #0a0a0a;
            color: #e5e5e5;
            font-family: 'Special Elite', monospace;
            overflow-x: hidden;
        }

        /* Текстуры и фоны */
        .noise-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 9999; opacity: 0.07;
            background-image: repeating-radial-gradient(#000 0 0.0001%,#fff 0 0.0002%);
        }
        .vignette {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            box-shadow: inset 0 0 150px rgba(0,0,0,0.9);
            pointer-events: none; z-index: 900;
        }
        .concrete-bg {
            background-image: url("https://www.transparenttextures.com/patterns/concrete-wall.png");
            background-color: #121212;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
        }

        /* === ТИПОГРАФИКА === */
        .title-font {
            font-family: 'Black Ops One', cursive;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #dcdcdc;
            text-shadow: 4px 4px 0px #000;
        }
        .marker-highlight {
            color: #111;
            background-color: #ff3333;
            padding: 0 4px;
            font-weight: bold;
            box-shadow: 2px 2px 0px rgba(0,0,0,0.5);
        }

        /* === КОНТЕЙНЕР ДЛЯ БЛЮРА === */
        #app-wrapper {
            transition: filter 0.5s ease, transform 0.5s ease;
        }
        /* Класс, который вешается на обертку сайта при открытии карточки */
        body.modal-open #app-wrapper {
            filter: blur(10px) grayscale(80%) brightness(0.5);
            transform: scale(0.98);
            pointer-events: none;
        }

        /* === КАРТОЧКИ === */
        .fact-card {
            background: #1a1a1a;
            border: 1px solid #333;
            padding: 20px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s;
            /* Важно: для начального состояния */
            transform-origin: center center;
            backface-visibility: hidden;
        }

        /* Ховер эффект только если карточка НЕ открыта */
        .fact-card:not(.fixed-mode):hover {
            transform: translateY(-5px) rotate(1deg);
            box-shadow: 0 10px 25px rgba(0,0,0,0.8);
            border-color: #ff3333;
            z-index: 10;
        }

        .card-title {
            font-family: 'Black Ops One', cursive;
            font-size: 1.25rem;
            color: #ff3333;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            border-bottom: 2px dashed #333;
            padding-bottom: 5px;
        }

        /* Скотч */
        .tape {
            position: absolute;
            top: -12px; left: 50%;
            transform: translateX(-50%) rotate(-2deg);
            width: 100px; height: 30px;
            background-color: rgba(255,255,255,0.1);
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            backdrop-filter: blur(2px);
            pointer-events: none;
        }

        /* === СОСТОЯНИЕ ОТКРЫТОЙ КАРТОЧКИ (FIXED) === */
        .fact-card.fixed-mode {
            position: fixed;
            z-index: 10000; /* Поверх всего */
            box-shadow: 0 0 100px rgba(0,0,0,0.9), 0 0 0 1000px rgba(0,0,0,0.7); /* Затемнение фона */
            border: 2px solid #ff3333;
            background: #111;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: default;
            /* Свойства для анимации */
            transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1); 
        }

        /* Кнопка закрытия внутри карточки */
        .close-btn {
            position: absolute;
            top: 10px; right: 10px;
            color: #555;
            font-family: sans-serif;
            font-size: 24px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s 0.3s; /* Задержка появления */
        }
        .fact-card.fixed-mode .close-btn {
            opacity: 1;
        }
        .fact-card.fixed-mode:hover .close-btn {
            color: #ff3333;
        }

        /* Увеличение текста в открытой карточке */
        .fact-card.fixed-mode .card-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            border-bottom: 2px solid #ff3333;
        }
        .fact-card.fixed-mode p {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #eee;
        }

        /* Плейсхолдер - пустое место в сетке */
        .card-placeholder {
            opacity: 0;
            pointer-events: none;
        }

        /* === МИНИ-ИГРА === */
        #graffitiCanvas {
            background-color: #222;
            border: 4px solid #000;
            box-shadow: inset 0 0 20px #000;
            cursor: crosshair;
        }
        .color-btn { transition: transform 0.1s; }
        .color-btn:active { transform: scale(0.9); }
    </style>
</head>

<body>
    <!-- Фоновые элементы -->
    <div class="noise-overlay"></div>
    <div class="vignette"></div>
    <div class="concrete-bg"></div>

    <!-- Обертка всего контента для блюра -->
    <div id="app-wrapper">
        
        <!-- Шапка -->
        <header class="text-center pt-20 pb-10 px-4 border-b border-gray-800 bg-black/50 backdrop-blur-sm">
            <h1 class="text-6xl md:text-9xl title-font mb-2 tracking-tighter">HAJIME</h1>
            <p class="text-gray-500 text-lg tracking-widest uppercase">// Miyagi & Andy Panda // Est. 2015</p>
        </header>

        <!-- Основной контент -->
        <main class="container mx-auto p-6">
            
            <section class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 my-12" id="cards-grid">
                
                <!-- 1 -->
                <div class="fact-card" data-id="1">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">01. Истоки</h3>
                    <p class="text-gray-400 text-sm"><span class="text-white">MiyaGi</span> (Азамат Кудзаев) — хирург. <span class="text-white">Andy Panda</span> (Сослан Бурнацев) — технолог. Оба из Владикавказа.</p>
                </div>

                <!-- 2 -->
                <div class="fact-card" data-id="2">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">02. Dope Records</h3>
                    <p class="text-gray-400 text-sm">Встретились в <span class="marker-highlight text-white">Dope Records</span>. В 2015 стали дуэтом. Первый хит — "Санавабич".</p>
                </div>

                <!-- 3 -->
                <div class="fact-card" data-id="3">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">03. Имена</h3>
                    <p class="text-gray-400 text-sm">MiyaGi — в честь мастера из "Karate Kid". Эндшпиль стал Andy Panda в 2019.</p>
                </div>

                <!-- 4 -->
                <div class="fact-card border-l-4 border-red-600" data-id="4">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title text-red-500">04. МИЛЛИАРД</h3>
                    <p class="text-gray-300 text-sm font-bold">
                        Клип <span class="marker-highlight text-white">"I Got Love"</span>.
                        <br><br>
                        <span class="text-3xl block text-white mt-2">1 МЛРД+</span>
                        просмотров. Абсолютный рекорд.
                    </p>
                </div>

                <!-- 5 -->
                <div class="fact-card" data-id="5">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">05. Стиль</h3>
                    <p class="text-gray-400 text-sm">Сплав рэгги, дэнсхолла и хип-хопа. Мелодика, исцеляющая души.</p>
                </div>

                <!-- 6 -->
                <div class="fact-card" data-id="6">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">06. Hajime Rec</h3>
                    <p class="text-gray-400 text-sm">Лейбл <span class="text-white">Hajime Records</span> (2017). "Hajime" — Начало.</p>
                </div>

                <!-- 7 -->
                <div class="fact-card" data-id="7">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">07. Трилогия</h3>
                    <p class="text-gray-400 text-sm">"Hajime" Pt. 1, 2, 3. Эволюция от дворового рэпа до философии.</p>
                </div>

                <!-- 8 -->
                <div class="fact-card" data-id="8">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">08. Тишина</h3>
                    <p class="text-gray-400 text-sm">Молчат в интервью, говорят в песнях. Андеграунд подход.</p>
                </div>

                <!-- 9 -->
                <div class="fact-card" data-id="9">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">09. Сила</h3>
                    <p class="text-gray-400 text-sm">После трагедии 2017 года MiyaGi вернулся. Музыка как исцеление.</p>
                </div>

                <!-- 10 -->
                <div class="fact-card" data-id="10">
                    <div class="tape"></div>
                    <div class="close-btn">×</div>
                    <h3 class="card-title">10. Честь</h3>
                    <p class="text-gray-400 text-sm">Принципиальный отказ от рекламы. Искусство не продается.</p>
                </div>

            </section>

            <!-- Игра -->
            <section class="mt-20 mb-10 relative">
                <div class="absolute -top-6 left-1/2 -translate-x-1/2 bg-black px-4 py-1 border border-gray-700 z-20 transform -rotate-1">
                    <span class="text-red-500 font-bold tracking-widest uppercase">Street Art Zone</span>
                </div>
                <div class="bg-neutral-900 border-2 border-neutral-700 p-6 shadow-2xl relative">
                    <div class="flex justify-center gap-4 mb-4">
                        <button data-color="#ff3333" class="color-btn w-10 h-10 rounded-full bg-[#ff3333] border-2 border-black hover:ring-2 ring-gray-400"></button>
                        <button data-color="#ffffff" class="color-btn w-10 h-10 rounded-full bg-white border-2 border-black hover:ring-2 ring-gray-400"></button>
                        <button data-color="#FFFF00" class="color-btn w-10 h-10 rounded-full bg-yellow-400 border-2 border-black hover:ring-2 ring-gray-400"></button>
                        <button id="clearCanvas" class="px-4 py-2 bg-gray-800 text-white text-xs uppercase border border-gray-600 hover:bg-red-900 transition-colors">Стереть</button>
                    </div>
                    <div class="relative w-full max-w-4xl mx-auto border-4 border-black bg-[#222]">
                        <canvas id="graffitiCanvas" class="w-full block" height="400"></canvas>
                    </div>
                    <p class="text-center text-gray-600 text-xs mt-2 font-mono uppercase">Оставь свой след</p>
                </div>
            </section>

        </main>

        <footer class="text-center py-8 text-gray-600 text-xs font-mono bg-black border-t border-gray-900">
            @hajime_1244 2025 // ВСЕ ПРАВА ЗАЩИЩЕНЫ
        </footer>
    </div>

    <!-- ЛОГИКА -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // === ЛОГИКА КАРТОЧЕК (REPARENTING TECHNIQUE) ===
            // Чтобы избежать проблем с блюром и z-index, мы будем перемещать 
            // активную карточку из #app-wrapper прямо в body
            
            const cards = document.querySelectorAll('.fact-card');
            const wrapper = document.getElementById('app-wrapper');
            const body = document.body;
            
            let activeCard = null;
            let placeholder = document.createElement('div'); // Заглушка
            placeholder.className = 'fact-card card-placeholder';

            cards.forEach(card => {
                card.addEventListener('click', (e) => {
                    // Если клик по кнопке закрытия, то ничего не делаем (обработается отдельно)
                    if(e.target.classList.contains('close-btn')) {
                        closeCard(card);
                        e.stopPropagation();
                        return;
                    }

                    // Если карточка уже открыта - закрываем
                    if (activeCard === card) {
                        closeCard(card);
                    } else {
                        // Если открыта другая - закрываем её, потом открываем новую
                        if (activeCard) closeCard(activeCard);
                        openCard(card);
                    }
                });
            });

            function openCard(card) {
                activeCard = card;
                
                // 1. Запоминаем текущие размеры и позицию
                const rect = card.getBoundingClientRect();
                
                // 2. Настраиваем плейсхолдер таких же размеров
                placeholder.style.width = rect.width + 'px';
                placeholder.style.height = rect.height + 'px';
                
                // 3. Вставляем плейсхолдер ВМЕСТО карточки
                card.parentNode.insertBefore(placeholder, card);
                
                // 4. Перемещаем карточку в BODY (чтобы вырвать из под блюра)
                body.appendChild(card);
                
                // 5. Сначала ставим её точно туда, где она была (position: fixed)
                card.style.position = 'fixed';
                card.style.top = rect.top + 'px';
                card.style.left = rect.left + 'px';
                card.style.width = rect.width + 'px';
                card.style.height = rect.height + 'px';
                card.style.margin = '0';
                
                // 6. Добавляем класс для стилизации (тень и т.д.)
                card.classList.add('fixed-mode');
                
                // 7. Запускаем анимацию в центр
                // Небольшая задержка, чтобы браузер успел отрисовать начальное положение
                requestAnimationFrame(() => {
                    body.classList.add('modal-open'); // Включаем блюр фона
                    
                    // Целевые координаты (Центр экрана)
                    // Размер открытой карточки:
                    const targetWidth = Math.min(window.innerWidth * 0.9, 600);
                    const targetHeight = Math.min(window.innerHeight * 0.6, 500); // Примерная высота
                    
                    card.style.width = targetWidth + 'px';
                    card.style.height = 'auto'; // Позволяем расти по контенту
                    // Но для плавности анимации лучше пока задать фиксированную, а потом auto
                    // Для простоты анимируем translate
                    
                    card.style.top = '50%';
                    card.style.left = '50%';
                    card.style.transform = 'translate(-50%, -50%)';
                    
                    // Убираем ограничение по высоте для контента
                    card.style.height = 'auto';
                    // Чтобы анимация сработала плавно для высоты, можно использовать max-height,
                    // но здесь мы просто дадим ей встать в центр
                });
            }

            function closeCard(card) {
                if (!activeCard) return;

                // 1. Убираем блюр фона
                body.classList.remove('modal-open');
                
                // 2. Находим координаты, куда возвращаться (плейсхолдер)
                const rect = placeholder.getBoundingClientRect();
                
                // 3. Анимируем обратно
                card.style.transform = 'translate(0, 0)'; // Сброс центрирования
                card.style.top = rect.top + 'px';
                card.style.left = rect.left + 'px';
                card.style.width = rect.width + 'px';
                
                // Ждем окончания анимации (0.5s в CSS)
                setTimeout(() => {
                    // 4. Возвращаем в DOM на место
                    card.classList.remove('fixed-mode');
                    card.style = ''; // Сброс всех инлайн стилей
                    
                    if(placeholder.parentNode) {
                        placeholder.parentNode.insertBefore(card, placeholder);
                        placeholder.parentNode.removeChild(placeholder);
                    }
                    
                    activeCard = null;
                }, 500);
            }


            // === ГРАФФИТИ ===
            const canvas = document.getElementById('graffitiCanvas');
            const ctx = canvas.getContext('2d');
            const container = canvas.parentElement;

            function resizeCanvas() {
                canvas.width = container.clientWidth;
                canvas.height = 400;
                ctx.fillStyle = '#222';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            let painting = false;
            let color = '#ff3333';
            
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.addEventListener('click', () => color = btn.getAttribute('data-color'));
            });

            document.getElementById('clearCanvas').addEventListener('click', () => {
                ctx.fillStyle = '#222';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            });

            const draw = (e) => {
                if (!painting) return;
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
                const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
                
                ctx.fillStyle = color;
                for (let i = 0; i < 15; i++) {
                    const ox = (Math.random() - 0.5) * 20;
                    const oy = (Math.random() - 0.5) * 20;
                    ctx.beginPath();
                    ctx.arc(x + ox, y + oy, Math.random() * 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            };

            canvas.addEventListener('mousedown', () => painting = true);
            canvas.addEventListener('mouseup', () => painting = false);
            canvas.addEventListener('mouseleave', () => painting = false);
            canvas.addEventListener('mousemove', draw);
            
            canvas.addEventListener('touchstart', (e) => { painting = true; draw(e); });
            canvas.addEventListener('touchend', () => painting = false);
            canvas.addEventListener('touchmove', draw);
        });
    </script>
</body>
</html>


